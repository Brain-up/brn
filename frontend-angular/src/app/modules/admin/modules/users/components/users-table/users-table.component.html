<mat-form-field appearance="standard">
  <mat-label>{{ 'Admin.Modules.Users.Search' | translate }}</mat-label>
  <input matInput (keyup)="applyFilter($event)" #input />
  <mat-icon matPrefix>search</mat-icon>
</mat-form-field>

<table mat-table [dataSource]="dataSource" matSort>
  <!-- Table columns -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      {{
        'Admin.Modules.Users.Components.UsersTable.ColumnsName.Name' | translate
      }}
    </th>
    <td mat-cell *matCellDef="let user">
      {{ user.name }}
      {{
        'Admin.Modules.Users.Components.UsersTable.NameColumn.CommonInfo [years, gender]'
          | translate: { years: user.age, gender: user.gender | lowercase }
      }}
    </td>
  </ng-container>

  <ng-container matColumnDef="firstVisit">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      {{
        'Admin.Modules.Users.Components.UsersTable.ColumnsName.FirstVisit'
          | translate
      }}
    </th>
    <td mat-cell *matCellDef="let user">
      {{ user.firstDone | date }}
      {{
        'Admin.Modules.Users.Components.UsersTable.VisitColumn.Time [hours]'
          | translate: { hours: user.firstDone | date: 'H' }
      }}
    </td>
  </ng-container>

  <ng-container matColumnDef="lastVisit">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      {{
        'Admin.Modules.Users.Components.UsersTable.ColumnsName.LastVisit'
          | translate
      }}
    </th>
    <td mat-cell *matCellDef="let user">
      {{ user.lastDone | date }}
      {{
        'Admin.Modules.Users.Components.UsersTable.VisitColumn.Time [hours]'
          | translate: { hours: user.lastDone | date: 'H' }
      }}
    </td>
  </ng-container>

  <ng-container matColumnDef="currentWeek">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      {{
        'Admin.Modules.Users.Components.UsersTable.ColumnsName.CurrentWeek'
          | translate
      }}
    </th>
    <td class="last-week-column" mat-cell *matCellDef="let user">
      <ng-container *ngIf="dataSource">
        <app-bar-chart
          [data]="user.currentWeekChart.data"
          [options]="user.currentWeekChart.option"
        ></app-bar-chart>
      </ng-container>
    </td>
  </ng-container>

  <ng-container matColumnDef="workingDaysInLastMonth">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      {{
        'Admin.Modules.Users.Components.UsersTable.ColumnsName.WorkingDaysInLastMonth'
          | translate
      }}
    </th>
    <td mat-cell *matCellDef="let user">{{ user.workDayByLastMonth }}</td>
  </ng-container>

  <ng-container matColumnDef="progress">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      {{
        'Admin.Modules.Users.Components.UsersTable.ColumnsName.Progress'
          | translate
      }}
    </th>
    <td class="progress-column" mat-cell *matCellDef="let user">
      <mat-icon
        svgIcon="up-arrow"
        *ngIf="user.diagnosticProgress.SIGNALS"
      ></mat-icon>
    </td>
  </ng-container>

  <ng-container matColumnDef="favorite">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      {{
        'Admin.Modules.Users.Components.UsersTable.ColumnsName.Favorite'
          | translate
      }}
    </th>
    <td class="favorite-column" mat-cell *matCellDef="let user">
      <mat-icon svgIcon="star" [class.favorite]="user.isFavorite"></mat-icon>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

  <!-- If no matching data. -->
  <tr class="mat-row" *matNoDataRow>
    <td class="mat-cell" colspan="4">
      No data matching the filter "{{ input.value }}"
    </td>
  </tr>
</table>

<mat-paginator
  [pageSizeOptions]="[5, 10, 25, 100]"
  aria-label="Select page of users"
></mat-paginator>
