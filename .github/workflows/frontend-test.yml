name: Frontend tests
on:
  pull_request:
    paths:
    - 'frontend/**'
    - '.github/workflows/frontend-test.yml'

jobs: 
  deps: 
    name: Run all tests
    runs-on: ubuntu-latest
    steps: 
      - uses: actions/checkout@v1
      - uses: mydea/actions-ember-testing@v1
      - name: Install dependencies
        working-directory: ./frontend
        run: yarn install
      - name: Run tests
        working-directory: ./frontend
        run: yarn test
      - name: Lint .js 
        working-directory: ./frontend
        run: yarn lint:js
      - name: Lint .hbs
        working-directory: ./frontend
        run: yarn lint:hbs
      - uses: mydea/ember-cli-code-coverage-action@v1
        with:
          repo-token: "${{ secrets.GITHUB_TOKEN }}"
          test-command: "cd ./frontend && yarn test-coverage"